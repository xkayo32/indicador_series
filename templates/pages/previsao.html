{% extends "base/base.html" %} {% load static %}
{% block title %}Ativos{%endblock title %}
{% block css_add %}
<link rel="stylesheet" href="{% static 'css/style_previsao.css' %}" />{% endblock css_add %}
{% block body %}
<section class="tela-input">
  <form action="{% url 'core:previsao_page' %}" method="post">
    {% csrf_token %}
    <div class="input">
      <label for="ativo">Ativo
        <select class="input-ativo" name="acao">
          <option value="PETR4.SA">PETR4</option>
          <option value="VALE3.SA">VALE3</option>
          <option value="ITUB4.SA">ITUB4</option>
          <option value="BBAS3.SA">BBAS3</option>
          <option value="ABEV3.SA">ABEV3</option>
          <option value="BBDC4.SA">BBDC4</option>
          <option value="BBDC3.SA">BBDC3</option>
          <option value="EURUSD=X">EURUSD</option>
          <option value="USDBRL=X">USDBRL</option>
        </select>
      </label>
      <div class="date">
        <label>Data Inicial
          <input type="date" class="data-inicial" name="data_inicial" required />
        </label>
        <label>Data Final
          <input type="date" class="data-final" name="data_final" required />
        </label>
      </div>
      <input type="submit" class="search" value="Pesquisar" />
    </div>
  </form>
</section>
{% if dataframe.size %}
<div class="text-center">
  <h1>{{infor_ativo.info.longName}}</h1>
</div>
{{grafico_candle.to_html|safe}}
{{grafico_tendencia.to_html|safe}}
{{previsao.tail.to_html|safe}}

<div class="card-group">
  <h3>Preço de fechamento</h3>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Mediana</h5>
      <p class="card-text">{{dataframe.Close.median|floatformat:2}}</p>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Média</h5>
      <p class="card-text">{{dataframe.Close.mean|floatformat:2}}</p>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Desvio Padrão</h5>
      <p class="card-text">{{dataframe.Close.std|floatformat:2}}</p>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Ultimo Preço</h5>
      <p class="card-text">
        {{infor_ativo.info.regularMarketPrice|floatformat:2}}
      </p>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Tendencia</h5>
      <p class="card-text">{{tendencia.tendencia}}</p>
    </div>
  </div>
</div>
<div class="card-group">
  <h3>Valor de tendencia</h3>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Mediana</h5>
      <p class="card-text">{{previsao.maxima_tendencia.median|floatformat:2}}</p>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Média</h5>
      <p class="card-text">{{previsao.maxima_tendencia.mean|floatformat:2}}</p>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Desvio Padrão</h5>
      <p class="card-text">{{previsao.maxima_tendencia.std|floatformat:2}}</p>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Ultima tendecia</h5>
      <p class="card-text">
        {{ultima_tendencia.maxima_tendencia|floatformat:2}}
      </p>
    </div>
  </div>
</div>
<div>
  <h3>Fibonacci</h3>
  <p>
    {{tendencia.fibonacci}}
</div>
{% endif %}
{% endblock body %}